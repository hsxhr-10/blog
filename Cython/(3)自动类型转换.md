# 自动类型转换

根据官方文档可以找到一张自动类型转换的映射关系图，如下：

![](https://github.com/hsxhr-10/Blog/blob/master/image/cython%E8%87%AA%E5%8A%A8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E6%98%A0%E5%B0%84%E5%9B%BE.png)

以 Python 为轴心，str/bytes（包括）以上的算作基本类型，其他为复合类型，在实际的使用中有些小建议如下：

1. Python 的 int 类型可以表示的范围非常大，在赋值给 C 类型时注意选择合适的数值类型，避免溢出被截断
2. C 的字符串，即 char*，对应 Python2.x 的 str 类型，而对于 Python3.x 则是 bytes 类型。这是由于 Python3.x 中的字符串默认是一个 Unicode 容器
3. 对于字符串，建议直接使用 Cython C++ 标准库中的 `<string>` 比较省头发（狗头）
4. 而对于复合类型，比如 Python 中的 list、set、map，则建议直接使用 Cython C++ 标准库中的 `<vector>`、`<set>`、`<map>`，同样也可以达到省头发的效果（再次狗头）
5. Cython C++ 标准库跟不上新版本的 C++ 库，比如 `<vector>` 没有 emplace_back() 成员函数等

正是有了自动类型转换，才使得 Cython 中的 Python/C/C++ 混编变得相对斯滑。