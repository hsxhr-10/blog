# 函数式编程风格

这篇笔记唠嗑唠嗑 Python 中非常常用的一些函数式编程技巧：`lambda`、`map()`、`filter()`、`reduce()`，没什么干货，主要是提醒自己平时要多用这些技巧，写出更加 Pythonic 的代码，直接上一些例子吧。

## `lambda` + `map()`

```python
In [147]: l = [1, 2, 3]

In [148]: r = map(lambda x: x*2, l)

In [149]: l
Out[149]: [1, 2, 3]

In [150]: type(r)
Out[150]: map

In [151]: list(r)
Out[151]: [2, 4, 6]
```

```python
In [153]: l = [1, 2, 3]

In [154]: r = map(lambda x: x*2, l)

In [155]: next(r)
Out[155]: 2

In [156]: next(r)
Out[156]: 4

In [157]: next(r)
Out[157]: 6

In [158]: next(r)
---------------------------------------------------------------------------
StopIteration                             Traceback (most recent call last)
<ipython-input-158-8ebe59a56b1d> in <module>
----> 1 next(r)

StopIteration:
```

1. `map()` 的结果是一个生成器，可以用 `next()` 函数访问，也可以专程 list
2. `map()` 不会修改原来的列表

## `lambda` + `filter()`

```python
In [159]: l = [1, 2, 32, 12, 55, 86, 21, 90]

In [160]: r = filter(lambda x: x > 12, l)

In [161]: list(r)
Out[161]: [32, 55, 86, 21, 90]
```

```python
In [159]: l = [1, 2, 32, 12, 55, 86, 21, 90]

In [160]: r = filter(lambda x: x > 12, l)

In [163]: next(r)
Out[163]: 32

In [164]: next(r)
Out[164]: 55

In [165]: next(r)
Out[165]: 86

In [166]: next(r)
Out[166]: 21

In [167]: next(r)
Out[167]: 90

In [168]: next(r)
---------------------------------------------------------------------------
StopIteration                             Traceback (most recent call last)
<ipython-input-168-8ebe59a56b1d> in <module>
----> 1 next(r)

StopIteration:

In [169]:
```

1. `filter()` 的结果是一个生成器，可以用 `next()` 函数访问，也可以专程 list
2. `filter()` 需要传入的函数返回 `True` 或者 `False`

## `lambda` + `reduce()`

这个不是内置函数，处理方式和归并排序的二路归并相似，可以类比。

```python
In [172]: from functools import reduce
     ...: r = reduce( (lambda x, y: x * y), [1, 2, 3, 4] )

In [173]: r
Out[173]: 24
```

1. `reduce()` 的结果不是生成器
2. `reduce()` 传入的函数需要两个参数